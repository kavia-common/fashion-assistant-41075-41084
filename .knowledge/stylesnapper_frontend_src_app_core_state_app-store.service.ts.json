{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular service called AppStore that manages application state using Angular signals. It includes interfaces for user and cart item data, as well as methods for accessing and mutating state such as user info, authentication token, cart items, loading status, and feature flags.", "external_files": ["@angular/core"], "external_methods": ["signal", "computed", "asReadonly", "set"], "published": ["AppStore", "AppUser", "CartItem"], "classes": [{"name": "AppStore", "description": "An Angular service that provides a lightweight, signals-based global state management system for user, cart, and application status data."}], "methods": [{"name": "currentUser", "description": "Returns a readonly signal of the current authenticated user."}, {"name": "authToken", "description": "Returns a readonly signal of the authentication token."}, {"name": "cartItems", "description": "Returns a readonly signal of the items in the shopping cart."}, {"name": "isLoading", "description": "Returns a readonly signal indicating whether the app is in a loading state."}, {"name": "featureFlags", "description": "Returns a readonly signal of the feature flags and experiments."}, {"name": "cartCount", "description": "Returns a readonly signal for the total number of items in the cart."}, {"name": "cartSubtotal", "description": "Returns a readonly signal for the subtotal price of cart items."}, {"name": "setCurrentUser", "description": "Updates the current user in the app state."}, {"name": "setAuthToken", "description": "Sets the authentication token and updates local storage."}, {"name": "addToCart", "description": "Adds an item to the cart, updating quantity if the item already exists."}, {"name": "updateCartItem", "description": "Updates the quantity of a specific cart item."}, {"name": "clearCart", "description": "Removes all items from the cart."}, {"name": "setLoading", "description": "Sets the global loading state."}, {"name": "setFeatureFlags", "description": "Updates feature flags in the app state."}, {"name": "isFlagEnabled", "description": "Checks if a specific feature flag is enabled."}], "calls": ["this._cartItems()", "this._cartItems().findIndex", "this._cartItems().map", "this._cartItems().filter", "this._featureFlags()", "this._currentUser.asReadonly()", "this._authToken.asReadonly()", "this._cartItems.asReadonly()", "this._isLoading.asReadonly()"], "search-terms": ["Angular signals-based store", "AppStore service", "application state management", "cart operations", "feature flags"], "state": 2, "file_id": 40, "knowledge_revision": 102, "git_revision": "", "ctags": [{"_type": "tag", "name": "AppStore", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^export class AppStore {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "AppUser", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^export interface AppUser {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "CartItem", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^export interface CartItem {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "_currentUser", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^  private readonly _currentUser = signal<AppUser | null>(null);$/", "language": "TypeScript", "kind": "property", "scope": "AppStore", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^  email?: string | null;$/", "language": "TypeScript", "kind": "property", "scope": "AppUser", "scopeKind": "interface"}, {"_type": "tag", "name": "g", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^      const g = globalThis as any;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^  id: string;$/", "language": "TypeScript", "kind": "property", "scope": "AppUser", "scopeKind": "interface"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^  id: string;$/", "language": "TypeScript", "kind": "property", "scope": "CartItem", "scopeKind": "interface"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^    const idx = items.findIndex(i => i.id === item.id);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^    const items = this._cartItems().map(i => (i.id === id ? { ...i, qty } : i));$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "items", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^    const items = this._cartItems();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "map", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^    const map = this._featureFlags();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^  name: string;$/", "language": "TypeScript", "kind": "property", "scope": "AppUser", "scopeKind": "interface"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^  name: string;$/", "language": "TypeScript", "kind": "property", "scope": "CartItem", "scopeKind": "interface"}, {"_type": "tag", "name": "price", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^  price: number; \\/\\/ unit price$/", "language": "TypeScript", "kind": "property", "scope": "CartItem", "scopeKind": "interface"}, {"_type": "tag", "name": "qty", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^  qty: number;$/", "language": "TypeScript", "kind": "property", "scope": "CartItem", "scopeKind": "interface"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/fashion-assistant-41075-41084/stylesnapper_frontend/src/app/core/state/app-store.service.ts", "pattern": "/^      const updated = [...items];$/", "language": "TypeScript", "kind": "constant"}], "hash": "7372554986df5cb3ab5e26bf5cacfedf", "format-version": 4, "code-base-name": "stylesnapper_frontend", "filename": "stylesnapper_frontend/src/app/core/state/app-store.service.ts", "fields": [{"name": "export interface AppUser {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "export interface CartItem {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "private readonly _currentUser = signal<AppUser | null>(null);", "scope": "AppStore", "scopeKind": "class", "description": "unavailable"}, {"name": "email?: string | null;", "scope": "AppUser", "scopeKind": "interface", "description": "unavailable"}, {"name": "id: string;", "scope": "AppUser", "scopeKind": "interface", "description": "unavailable"}, {"name": "name: string;", "scope": "AppUser", "scopeKind": "interface", "description": "unavailable"}, {"name": "price: number; \\/\\/ unit price", "scope": "CartItem", "scopeKind": "interface", "description": "unavailable"}, {"name": "qty: number;", "scope": "CartItem", "scopeKind": "interface", "description": "unavailable"}], "revision_history": [{"102": ""}]}